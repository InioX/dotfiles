<div align="center">
    <img src="https://nixos.org/logo/nixos-logo-only-hires.png" alt="logo" width=150>
    <h1>NIXOS DOTFILES</h1>
</div>

<div align="center">
  <a href="https://github.com/InioX/dotfiles/tree/nixos"><img src="https://img.shields.io/badge/NixOS-Unstable-5176c1?style=for-the-badge&logo=NixOS&logoColor=white" alt="NixOS - Unstable"></a>
   <img alt="GitHub Workflow Status" src="https://img.shields.io/github/actions/workflow/status/InioX/dotfiles/check.yml?color=5176c1&logo=github&style=for-the-badge"><br>
   <a href="#------------------------------installation">Installation</a>
    ·
  <a href="#------------------------------usage">Usage</a>
    ·
  <a href="#------------------------------showcase">Showcase</a>
</div>

<div align="center">
    <sub>My nixos dotfiles with  <a href="https://github.com/nix-community/home-manager">Home Manager</a>
</div>

<h2 class="showcase">
     <sub>
          <img  src="https://github.com/InioX/dotfiles/assets/81521595/eae80830-f035-4c03-8901-f481c858dcc5"
           height="25"
           width="25">     
     </sub>
     Showcase
</h2>

<table>
  <tr>
    <td></sup>Dark Mode</td>
    <td>Light Mode</td>
    <td>Dynamic Theming</td>
  </tr>
  <tr>
    <td><img src="https://github.com/InioX/dotfiles/assets/81521595/d7e04e00-5c91-4946-b711-639c08575b71"></td>
    <td><img src="https://github.com/InioX/dotfiles/assets/81521595/06f4cd5f-2a2e-4380-b610-3d655a5f0d57"></td>
    <td><img src="https://user-images.githubusercontent.com/81521595/236634805-15e68f9b-44a5-4efc-b275-0eb1f6a28bd9.gif" width=300></td>
  </tr>
 </table>

> [!WARNING]
> The showcase may be outdated and look differently.

<h2 class="description">
     <sub>
          <img  src="https://github.com/InioX/dotfiles/assets/81521595/aba782c2-f45a-4ee7-b511-45971ea751e6"
           height="25"
           width="25">
     </sub>
     Description
</h2>

Welcome to my dotfiles! My main goal was to have dynamic colors based on the wallpaper exactly like with [Material Design 3](https://m3.material.io/).

The `dotfiles/config` folder is there for compability reasons for arch, some files are missing from the folder because theyre generated by [Matugen](https://github.com/InioX/matugen) from `dotfiles/templates`.

<h2 class="installation">
     <sub>
          <img  src="https://github.com/InioX/dotfiles/assets/81521595/37663833-5d34-492e-95ea-73528184a42b"
           height="25"
           width="25">
     </sub>
     Installation
</h2>

```sh
bash <(curl -s https://raw.githubusercontent.com/InioX/dotfiles/nixos/install.sh) <hostname>
```

> [!TIP]
> After you are done installing and you want to make any changes to the dotfiles, make sure you clone the repository into `~/dev/dotfiles`

<h2 class="usage">
     <sub>
          <img  src="https://github.com/InioX/dotfiles/assets/81521595/4e2f040e-977b-43e2-8465-6915817475c7"
           height="25"
           width="25">
     </sub>
     Usage
</h2>

<h3 class="adding-new-hosts">
     <sub>
          <img  src="https://github.com/InioX/dotfiles/assets/81521595/7da759cf-08f0-4a09-a1a2-6f4ea59368c9"
           height="20"
           width="20">
     </sub>
     Adding new hosts
</h3>

> [!IMPORTANT]
> The name of the folder should be your hostname and it should be located in `hosts/<hostName>`. Every host folder should contain a `default.nix` file and `hardware.nix`.

1. Make a folder inside `hosts/`
```sh
mkdir hosts/<hostName>
```

2. Get a `hardware.nix` file and copy it into `hosts/`
```sh
nixos-generate-config && cp /etc/nixos/hardware-configuration.nix /hosts/<hostName>/hardware.nix
```

3. To get a `default.nix` file, you can modify this template.

```nix

# default.nix
{
  config,
  pkgs,
  lib,
  ...
}:
with lib; {
  imports = [./hardware.nix];

  # Configure the bootloader
  boot.loader = {
    systemd-boot = {
      enable = true;
      configurationLimit = 5;
    };
    efi = {
      canTouchEfiVariables = true;
      efiSysMountPoint = "/boot/efi";
    };
  };

  # Enable networking
  networking.networkmanager.enable = true;

  zenyte.presets = {
    common = enabled;
    development = enabled;
    social = enabled;
  };

  zenyte.system.locale.timeZone = "Europe/Prague";
  zenyte.system.defaultShell = pkgs.zsh;

  zenyte.desktop = {
    # xfce.enable = true;
    # awesome.enable = true;
    hyprland = enabled;
  };

  zenyte.browsers = {
    brave = disabled;
    chromium = disabled;

    firefox = {
      enable = true;
      # Default extensions: `ublock-origin`, `plasma-integration`
      extensions = with pkgs.nur.repos.rycee.firefox-addons; [
        bitwarden
      ];
    };
  };
  # Anything else here... You can also use `zenyte.<option>` to configure stuff.
}
```

> [!TIP]
> You can find out most of the options for `zenyte` by looking [here](./hosts/laptop/default.nix).

4. After you have a `default.nix` file, move it into `hosts/<hostName>/default.nix`

5. Finally, add the folder name as the hostname into `flake.nix`

```nix
# flake.nix
{
  outputs = { nixpkgs, ... } @inputs:
  let
  # ...
in {
    nixosConfigurations = {
        # USAGE: addNewHost <hostname>
        laptop = addNewHost  "laptop";
    };
  };
  inputs = {
    # ...
  };
}
```

<h2 class="issues">
     <sub>
          <img  src="https://github.com/InioX/dotfiles/assets/81521595/b9acc606-db85-4589-a5a4-3db0172068f0"
           height="25"
           width="25">
     </sub>
     Issues
</h2>

<h3 class="broken-bootloader-after-dual-booting-windows">
     <sub>
          <img  src="https://github.com/InioX/dotfiles/assets/81521595/8cf41faa-bd05-4e6c-91f6-b5948ddf48e4"
           height="20"
           width="20">
     </sub>
     Broken bootloader after dual booting Windows or updating BIOS
</h3>

1. Boot the live usb and mount partitions

> [!CAUTION]
> The partition and drive names will not be the same for everyone

```sh
sudo mount /dev/nvme0n1p2 /mnt
sudo mount /dev/nvme0n1p1 /mnt/boot
```

3. Move `/mnt/boot/EFI/Microsoft` to `/mnt/boot/EFI/Microsoft.bak`

```sh
sudo mv /mnt/boot/EFI/Microsoft /mnt/boot/EFI/Microsoft.bak
```

4. Reboot

5. Everything should work now, except you can't choose Windows from the Bootloader

6. Repeat step `1.`

7. Move `/mnt/boot/EFI/Microsoft.bak` back to the original position of `/mnt/boot/EFI/Microsoft`

```sh
sudo mv /mnt/boot/EFI/Microsoft /mnt/boot/EFI/Microsoft.bak
```

8. Reboot

9. Everything should work again as intended

<h2 class="acknowledgements">
     <sub>
          <img  src="https://github.com/InioX/dotfiles/assets/81521595/353caef1-d2bd-4a10-a709-c64b35465e65"
           height="25"
           width="25">
     </sub>
     Acknowledgements
</h2>

First, special thanks to [jakehamilton](https://github.com/jakehamilton), my config is **heavily** inspired by [him](https://github.com/jakehamilton/config).

I also want to thank all the people mentioned below, they either helped me solve issues or i copied from them.

[sioodmy](https://github.com/sioodmy/dotfiles)
•
[NobbZ](https://github.com/NobbZ)
•
[gingkapls](https://github.com/gingkapls)
